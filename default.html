<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <!-- Custom CSS for overrides as needed -->
      <link rel="stylesheet" href="assets/css/style.css">
    <!-- Javascript file contianing main functions -->
      <script src="assets/javascript/game.js"></script>
  
</head>
<body>


<div class="container-fluid text-center">    
  <div class="row content">
    <div class="col-sm-2 sidenav">
      <!--This is where the count down goes -->
      <p id = "TimeRemain">Timer</p>
      <br>
      <p id = "qTRemain">Questions Reviewed: 0</p>
      <br><br>
      <button id = "btnStart" type="button" class="btn btn-primary" onclick="startQuiz()">Start Trivia Game</button>
      <br><br>
      <button id = "btnStop" type="button" class="btn btn-danger" onclick="stopQuiz()">Stop Trivia Game</button>
      <br><br>
      <button id = "btnResults" type="button" class="btn btn-warning" onclick="showResults()">Check your score</button>
      </div>
    <div class="col-sm-8 text-left"> 
      <h1 style="text-align: center; background-image: 'assets/images/1200px-Seinfeld_logo.png'">Quiz</h1>
      <br><br>
        <div id = "TestSection">
          <p id="q">Placeholder</p>
          <form>
            <div id="rd1" class="radio-inline">
              <label id="lbl1"></label>
            </div>
            <div id="rd2" class="radio-inline">
              <label id="lbl2"></label>
            </div>
            <div id="rd3" class="radio-inline">
              <label id="lbl3"></label>
            </div>
            <div id="rd4" class="radio-inline">
              <label id="lbl4"></label>
            </div>
          </form>

        </div>
        <div>
          <img id = "WrongAnsImg" src="assets/images/mainlogo.jpg" width="200" height="300">
        </div>
      
    </div>
    <div class="col-sm-2 text-left">
      <img class="img-responsive" src="assets/images/mainlogo.jpg" alt="Cast" width="200" height="300"> 
      <table id="demo"></table>
    </div>
    
  </div>
</div>

<footer class="container-fluid text-center" style = "background-color: grey">
  <p>Footer Text</p>
</footer>
<script type="text/javascript">

//$(document).ready(function() {
      var timeLeft = 30;
      var qtimeLeft = 3;
      intQR = 1;
      var timerId;
      var qtimerId;
      var data;
      var userScore = 0;
      var userWrongCount = 0; 

      function countdown() {
        if (timeLeft == 0) {
          clearTimeout(timerId);
          $("#TimeRemain").text("Out of Time");
          //myFunction();
        } else {
          $("#TimeRemain").text(timeLeft + ' seconds remaining');
          timeLeft--;
        }
      }

      function qcountdown() {
        
        var userSelected = "";

        if (qtimeLeft == 0) {
          clearTimeout(qTimerId);
          $("#qTRemain").text(qtimeLeft);
          //end the game
          //check the final score
          //alert the score
        } else if(intQR == 10){
            //end the game
            //check the final score
          //alert the score
        }

        else{
          $("#qTRemain").text("Quetions Reviewed: " + intQR)
          //this is where the question answer check and reset goes
          console.log("intQR: " + intQR);
          console.log("The correct answer for question " + intQR + " is:" + data.Ans);
          //if user checked correct radio button add 1 to userScore
          if ($("#rdo1").prop("checked")==true) {
            userSelected = $("#rdo1").prop("value");
          }
          if ($("#rdo2").prop("checked")==true) {
            userSelected = $("#rdo2").prop("value");
          }
          if ($("#rdo3").prop("checked")==true) {
            userSelected = $("#rdo3").prop("value");
          }
          if ($("#rdo4").prop("checked")==true) {
            userSelected = $("#rdo4").prop("value");
          }
          //check selection value against data answer value
          if(userSelected == data.Ans){
            userScore++;
          }
          else{
              //insert an image here
              userWrongCount++;

              fnPushWrongAnsImage(userWrongCount-1);


          }
          console.log("User score is now: "+userScore);
          //set up next question
          data = fnGetQuestion(intQR);
          fnPopulateQuiz(data);
          intQR++;
          
        }
      }

      // This function will replace display whatever image it's given
      // in the 'src' attribute of the img tag.
      function displayImage() {
        $('#btnStart').prop('disabled',false).css('opacity',1.0);
        $('#btnStop').prop('disabled',true).css('opacity',0.5);
        $('#btnResults').prop('disabled',true).css('opacity',0.5);
        $("#q").html("<p>Welcome to the Trivia Game.  Press start to begin.</p>");
      }


      function startQuiz() {
        //start the timer
        timerId = setInterval(countdown, 1000);
        //set and start the 3 second question timer
        qTimerId = setInterval(qcountdown, 5000);

        data = fnGetQuestion(0); //get first question
        console.log(data);
        fnPopulateQuiz(data);//call function to set form elements to first quiz question
        //disable the start button
        $('#btnStart').prop('disabled',true).css('opacity',0.5);
        $('#btnStop').prop('disabled',false).css('opacity',1.0);
        $('#btnResults').prop('disabled',true).css('opacity',0.5);
      }
              
      function stopQuiz() {
      clearInterval(timerId);
      clearInterval(qTimerId);
      //enable the start button
      $('#btnStart').prop('disabled',false).css('opacity',1.0);
      $('#btnStop').prop('disabled',true).css('opacity',0.5);
      $('#btnResults').prop('disabled',false).css('opacity',1.0);
      }

      function showResults(){

        alert("You got " + userScore + " Out of 10 Correct");
        //change HTML element to better luck next time with gif if score less than 70% or 7 correct
        if(userScore<7){
          alert("bad");
        }
        else{
          alert("good");

        }

      }
      // This will run the display image function as soon as the page loads.
      displayImage();
      //});
  
</script>
</body>
</html>
